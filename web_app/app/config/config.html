<div class="medium-3 grid-block vertical shadow-glow">
	<div class="grid-content shadow-bottom shrink">
		<h3>Select Buoys</h3>
		<ul>
			<li class="expand info button listButton"
				ng-click="vm.selectAll()">
				All Buoys
			</li>
		</ul>
	</div>
	<div class="grid-content shadow-bottom">
		<h4>Buoy Groups</h4>
		<ul>
			<li class="expand button listButton"
				ng-click="vm.selectNewBuoyGroup()">
				New Buoy Group
			</li>
			<li class="expand info button listButton"
				ng-repeat="buoyGroup in vm.buoyGroups | filter:vm.buoyGroupFilter"
				ng-click="vm.selectBuoyGroup(buoyGroup)">
					{{ buoyGroup.name }}
			</li>
		</ul>
	</div>
	<div class="grid-content shadow-bottom">
		<h4>Buoy Instances</h4>
		<ul>
			<li class="expand info button listButton"
				ng-repeat="buoyInstance in vm.buoyInstances"
				ng-click="vm.selectBuoyInstance(buoyInstance)">
					<span ng-if="buoyInstance.name != ''">{{ buoyInstance.name }}</span>
					<span ng-if="buoyInstance.name == ''" class="red">(no name)</span>
					({{ buoyInstance.buoyGroupName }})
			</li>
		</ul>
	</div>
</div>
<div class="medium-9 grid-content">
	<div ng-if="vm.selected.type == 'newGroup'">
		<label>Name</label>
		<form>
			<input type="text" ng-model="vm.editName.value">
			<input type="submit" ng-click="vm.saveNewBuoyGroup()" 
				value="Save" class="small button">
		</form>
	</div>
	<div ng-if="vm.selected.type == 'group'">
		<h3>{{ vm.selected.obj.name }}</h3>
			<button ng-if="!vm.editing()"
				class="small button" ng-click="vm.startEditingName()">Edit name
			</button>
		<form ng-if="vm.editName.on">
			<input type="text" ng-model="vm.selected.obj.name">
			<input type="submit" ng-click="vm.finishEditingName()"
				value="Save" class="small button">
			<button class="info button" ng-click="vm.cancelEditName()">Cancel</button>
		</form>
	</div>
	<div ng-if="vm.selected.type == 'instance'">
		<h3 ng-if="vm.selected.obj.name != ''">{{ vm.selected.obj.name }}</h3>
		<h3 ng-if="vm.selected.obj.name == ''" class="red">(no name)</h3>
		<button ng-if="!vm.editing()"
			class="small button" ng-click="vm.startEditingName()">Edit name
		</button>
		<form ng-if="vm.editName.on">
			<input type="text" ng-model="vm.selected.obj.name">
			<input type="submit" ng-click="vm.finishEditingName()"
				value="Save" class="small button">
			<button class="info button" ng-click="vm.cancelEditName()">Cancel</button>
		</form>
		<div ng-if="!vm.editGroup.on">
			<span>{{ vm.selected.obj.buoyGroupName }} 
				<button class="small button" ng-click="vm.startEditingBuoyGroup()"
					ng-if="!vm.editing()">Change group</button>
			</span>
		</div>
		<form ng-if="vm.editGroup.on">
			<label>New name</label>
			<input type="text" ng-model="vm.editGroup.name">
			<label>New group</label>
			<select type="button" class="btn btn-default" 
					ng-model="vm.editGroup.buoyGroupId" 
					bs-options="opt.id as opt.name for opt in vm.buoyGroups"
					bs-select>
			</select>
			<br>
			<input type="submit" ng-click="vm.finishEditingBuoyGroup()"
				value="Save" class="small button">
			<button class="info button" ng-click="vm.cancelEditGroup()">Cancel</button>
		</form>
	</div>
	<div ng-if="vm.selected.type == 'group'">
		<h3>Buoys</h3>
		<span ng-if="vm.groupBuoys.length == 0">(none)</span>
		<ul ng-if="vm.groupBuoys.length > 0">
			<li ng-repeat="buoyInstance in vm.groupBuoys">
				{{ buoyInstance.name }}
				<span ng-if="buoyInstance.name == ''">(no name)</span>
			</li>
		</ul>
	</div>
	<div ng-if="vm.showBuoyConfig()">
		<div>
			<h3>Commands</h3>
			<table>
				<thead>
					<tr>
						<th>Buoy</th>
						<th>Command</th>
						<th>Value</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="command in vm.commands | filter:vm.commandFilter">
						<td>{{ command.buoyName }}</td>
						<td>{{ command.commandName }}</td>
						<td>{{ command.value }}</td>
						<td>
							<!--<button class="small alert button"
								ng-click="vm.deleteCommand(command)">
								Delete
							</button>-->
						</td>
					</tr>
				</tbody>
			</table>
			<button class="button small"
					ng-click="vm.newCommand = true"
					ng-if="!vm.editing()">New Command</button>
			<form ng-if="vm.newCommand == true">
				<h4>New Command</h4>
				<select type="button" class="btn btn-default" 
						ng-model="vm.command.id" 
						bs-options="opt.id as opt.name for opt in vm.commandTypes"
						placeholder="Command type"
						bs-select>
				</select>
				<label>Value</label>
				<input type="text" ng-model="vm.command.value" style="width: 20%">
				<input type="submit" ng-click="vm.sendCommand()"
					class="button" value="Send">
				<button class="info button" ng-click="vm.cancelNewCommand()">Cancel</button>
			</form>
		</div>
		<div>
			<h3>Warning Triggers</h3>
			<table>
				<thead>
					<tr>
						<th>Buoy</th>
						<th>Sensor</th>
						<th>Operator</th>
						<th>Value</th>
						<th>Message</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="trigger in vm.warningTriggers | filter:vm.triggerFilter">
						<td>{{ trigger.buoyName }}</td>
						<td>{{ trigger.sensorName }}</td>
						<td>{{ trigger.operator }}</td>
						<td>{{ trigger.value }}</td>
						<td>{{ trigger.message }}</td>
					</tr>
				</tbody>
			</table>
			<button class="button small"
					ng-click="vm.newTrigger = true"
					ng-if="!vm.editing()">New Warning Trigger
			</button>
			<form ng-if="vm.newTrigger == true">
				<h4>New Warning Trigger</h4>
				<select type="button" class="btn btn-default" 
						ng-model="vm.trigger.sensorTypeId" 
						bs-options="opt.id as opt.name for opt in vm.sensorTypes"
						placeholder="Sensor type"
						bs-select>
				</select>
				<select type="button" class="btn btn-default" 
						ng-model="vm.trigger.operator" 
						bs-options="opt for opt in vm.operators"
						bs-select>
				</select>
				<label>Value</label>
				<input type="text" ng-model="vm.trigger.value" style="width: 20%">
				<label>Message</label>
				<input type="text" ng-model="vm.trigger.message">
				<input type="submit" ng-click="vm.addTrigger()"
					class="button" value="Add">
				<button class="info button" ng-click="vm.cancelNewTrigger()">Cancel</button>
			</form>
		</div>
	</div>
</div>