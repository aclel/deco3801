!function(){"use strict";angular.module("app",["ui.router","mgcrea.ngStrap","mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.parseOptions","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.datepicker","mgcrea.ngStrap.timepicker","mgcrea.ngStrap.button","mgcrea.ngStrap.select","chart.js","app.auth","app.dashboard","app.config"])}(),function(){"use strict";angular.module("app.auth",[])}(),function(){"use strict";angular.module("app.config",[])}(),function(){"use strict";angular.module("app.dashboard",[])}(),function(){"use strict";angular.module("app").config(["$datepickerProvider","$timepickerProvider","$httpProvider",function(e,t,n){n.interceptors.push("authInterceptor"),angular.extend(e.defaults,{autoclose:!0,dateFormat:"d/M/yy",modelDateFormat:"d/M/yy",dateType:"string",startWeek:1}),angular.extend(t.defaults,{autoclose:!1,timeFormat:"h:mm a",modelTimeFormat:"h:mm a",timeType:"string"})}])}(),function(){"use strict";angular.module("app").constant("SERVER_ADDRESS","http://localhost:8080")}(),function(){"use strict";angular.module("app").run(["$rootScope","$state","$stateParams",function(e,t,n){e.$state=t,e.$stateParams=n}]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/dashboard"),e.state("login",{url:"/login",templateUrl:"/app/auth/login.html"}).state("dashboard",{url:"/dashboard",controller:"DashboardController",controllerAs:"vm",templateUrl:"/app/dashboard/dashboard.html"}).state("config",{url:"/config",controller:"ConfigController",controllerAs:"vm",templateUrl:"/app/config/config.html"}).state("warnings",{url:"/warnings"})}])}(),function(){"use strict";function e(e,t,n,r){function o(){r.login(s.username,s.password).then(function(e){n.authed()&&(s.authed=!0,t.go("dashboard"),a())},function(e){alert("Invalid username or password")})}function i(){r.logout(),s.authed=!1,t.go("login")}function a(){s.username="imafake",s.password="ekafami"}var s=this;s.authed=n.authed(),s.login=o,s.logout=i,a(),e.$on("$stateChangeStart",function(e,r){n.authed()?"login"==r.name&&(e.preventDefault(),t.is("login")&&t.go("dashboard")):"login"!=r.name&&(e.preventDefault(),t.go("login"))})}angular.module("app.auth").controller("AuthController",e),e.$inject=["$rootScope","$state","auth","server"]}(),function(){"use strict";function e(e){function t(e,t){}function n(){e.localStorage.removeItem("token")}function r(){var e=i();if(e){var t=a(e);return moment().unix()<=t.exp}return!1}function o(t){e.localStorage.token=t}function i(t){return e.localStorage.token}function a(t){var n=t.split(".")[1],r=n.replace("-","+").replace("_","/");return JSON.parse(e.atob(r))}return{login:t,logout:n,authed:r,getToken:i,saveToken:o}}angular.module("app.auth").factory("auth",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){function t(e){return e}function n(t){return t.data.token&&e.saveToken(t.data.token),t}return{request:t,response:n}}angular.module("app.auth").factory("authInterceptor",e),e.$inject=["auth"]}(),function(){"use strict";function e(e){function t(e){r.sensorsEdit[e]&&(r.sensors[e].unconfigured=!1),r.sensorsEdit[e]=!r.sensorsEdit[e]}function n(e){return e.name&&e.units?!0:!1}var r=this;r.sensors=e.getSensors(),r.sensorsEdit=[],r.toggleEdit=t,r.sensorValid=n;for(var o=0;o<r.sensors.length;o++)r.sensorsEdit.push(!1)}angular.module("app.config").controller("ConfigController",e),e.$inject=["server"]}(),function(){"use strict";function e(e,t,n){function r(e,r){s.buoys[e]=r,t.updateBuoys(),n.updateReadings()}function o(){if(i()){var e=u+" "+p;"range"==s.times.type?(s.times.range.from=moment(s.times.inputs.range.from.date+" "+s.times.inputs.range.from.time,e),s.times.range.to=moment(s.times.inputs.range.to.date+" "+s.times.inputs.range.to.time,e)):"point"==s.times.type&&(s.times.point=moment(s.times.inputs.point.date+" "+s.times.inputs.point.time,e)),t.updateTimes(),n.updateReadings()}}function i(){if("all"==s.times.type)return!0;if("range"==s.times.type){var e=s.times.inputs.range.from.date,t=s.times.inputs.range.from.time,n=s.times.inputs.range.to.date,r=s.times.inputs.range.to.time;if(e&&t&&n&&r)return!0}return"point"==s.times.type&&s.times.inputs.point.date?!0:!1}function a(){t.updateSensors(),n.updateReadings()}var s=this;s.buoys=t.buoys(),s.times=t.times(),s.sensors=t.sensors(),s.updateBuoysFilter=r,s.updateTimesFilter=o,s.updateSensorsFilter=a,t.initialise().then(function(){s.buoys=t.buoys(),s.times=t.times(),s.sensors=t.sensors(),t.updateFilters(),n.updateReadings()});var u="D/M/YY",p="h:mm A";e.ready(function(){n.initialiseMap()})}angular.module("app.dashboard").controller("DashboardController",e),e.$inject=["$document","dashboard","map"]}(),function(){"use strict";function e(e,t){function n(){var e=t.getReadings();return e.then(function(e){console.log(e),x=e.data,o()},function(e){console.log("error"),console.log(e)}),e}function r(){I.buoys={},i(),I.times={type:"all",range:{from:null,to:null},point:null,pointReadings:{},inputs:{range:{from:{date:"",time:""},to:{date:"",time:""}},point:{date:"",time:""}}},I.sensors={},I.sensorInputs={},m()}function o(){i(),m()}function i(){for(var e=0;e<x.length;e++)I.buoys.hasOwnProperty(x[e].buoy)||(I.buoys[x[e].buoy]=!0)}function a(){return $}function s(){return I.buoys}function u(){return I.times}function p(){m();for(var e in I.sensorInputs)I.sensorInputs.hasOwnProperty(e)&&(I.sensors[e].inputs=I.sensorInputs[e]);var t=[];for(var e in I.sensors)I.sensors.hasOwnProperty(e)&&I.sensors[e].display&&t.push(I.sensors[e]);return t}function l(){y()}function d(){"point"==I.times.type&&f(),y()}function c(){y()}function m(){for(var e=t.getSensors(),n=0;n<e.length;n++)I.sensors[e[n].id]=e[n],I.sensorInputs.hasOwnProperty(e[n].id)||(I.sensorInputs[e[n].id]={enabled:!1,options:[">","<","="],selected:">",value:""}),e[n].display||(I.sensorInputs[e[n].id].enabled=!1)}function g(){for(var e=$,t=moment.unix(e[0].timestamp),n=1;n<e.length;n++)moment.unix(e[n].timestamp).isBefore(t)&&(t=moment.unix(e[n].timestamp));return t}function f(){for(var e={},t=0;t<x.length;t++){var n=x[t];if(e.hasOwnProperty(n.buoy)){var r=e[n.buoy].time,o=n.timestamp,i=moment.unix(r).diff(I.times.point),a=moment.unix(o).diff(I.times.point);Math.abs(a)<Math.abs(i)&&(e[n.buoy]={id:n.id,time:n.timestamp})}else e[n.buoy]={id:n.id,time:n.timestamp}}I.times.pointReadings=e}function y(){$=e("filter")(x,function(e){if(!h(e))return!1;if(!v(e))return!1;for(var t in I.sensorInputs)if(I.sensorInputs.hasOwnProperty(t)&&!b(t,I.sensorInputs[t],e))return!1;return!0})}function h(e){return I.buoys[e.buoy]?!0:!1}function v(e){if("range"==I.times.type){var t=moment.unix(e.timestamp);if(!t.isBetween(I.times.range.from,I.times.range.to))return!1}else if("point"==I.times.type&&I.times.pointReadings.hasOwnProperty(e.buoy)&&I.times.pointReadings[e.buoy].id!=e.id)return!1;return!0}function b(e,t,n){if(!t.enabled)return!0;var r=parseInt(t.value,10);if(">"==t.selected){if(n.readings[e]<=r)return!1}else if("<"==t.selected){if(n.readings[e]>=r)return!1}else if("="==t.selected&&n.readings[e]!=r)return!1;return!0}function w(e){var t=moment.unix(e.timestamp),n=I.times;if("all"==n.type){var r=moment(),o=r.clone().subtract(2,"weeks");return S(t,o,r)}if("range"==n.type){var r=n.range.to,o=n.range.from;return S(t,o,r)}if("point"==n.type){if(null===n.point)return 1;var r=n.point,o=r.clone().subtract(2,"weeks");return S(t,o,r)}}function S(e,t,n){return e.isBefore(t)?0:e.isBefore(n)?e.diff(t)/n.diff(t):1}var x=[],$=[],I={};return r(),{initialise:n,readings:a,buoys:s,times:u,sensors:p,updateBuoys:l,updateTimes:d,updateFilters:y,updateSensors:c,getOldestReading:g,getRelativeAge:w}}angular.module("app.dashboard").factory("dashboard",e),e.$inject=["$filter","server"]}(),function(){"use strict";function e(e){function t(){var t=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.station",elementType:"labels",stylers:[{visibility:"off"}]}];d.styles=t,p=new google.maps.Map(document.getElementById("map-canvas"),d),google.maps.event.addListener(p,"zoom_changed",function(){d.zoom=p.getZoom()}),google.maps.event.addListener(p,"center_changed",function(){d.center=p.getCenter()}),google.maps.event.addListener(p,"maptypeid_changed",function(){d.mapTypeId=p.getMapTypeId()}),google.maps.event.addListener(p,"click",function(){g&&s()});for(var n=e.readings(),o=0;o<n.length;o++)r(n[o])}function n(){for(var t=e.readings(),n=[],s=0;s<t.length;s++)n.push(t[s].id);for(var u in c)c.hasOwnProperty(u)&&(u=parseInt(u,10),-1==n.indexOf(u)&&o(u));for(var s=0;s<t.length;s++){var p=t[s].id;c.hasOwnProperty(p)?(c[p].setOpacity(a(t[s])),-1!=m.indexOf(p)&&i(p)):r(t[s])}}function r(e){var t=new google.maps.Marker({position:new google.maps.LatLng(e.latitude,e.longitude),map:p,opacity:a(e)});google.maps.event.addListener(t,"click",function(){u(e,t)}),c[e.id]=t}function o(e){c[e].setMap(null),m.push(e),g&&-1!=m.indexOf(f)&&s()}function i(e){c[e].setMap(p),m.splice(m.indexOf(e),1)}function a(t){var n=e.getRelativeAge(t),r=.3;return n*(1-r)+r}function s(){l.close(),g=!1}function u(e,t){if(!g||(s(),e.id!=f)){var n=moment.unix(e.timestamp).format("D MMMM h:mm A"),r="<div><h5 style='color: white'>Buoy "+e.buoy+"</h5>"+n+"<br>---<br>Battery: "+e.readings.battery+"<br>Pressure: "+e.readings.pressure+"<br>Sea level: "+e.readings.sealevel+"<br>Turbidity: "+e.readings.turbidity+"</div>";l=new InfoBox({content:r,pixelOffset:new google.maps.Size(-60,0),zIndex:null,boxStyle:{color:"white","background-color":"rgb(40, 40, 40)",width:"120px",padding:"10px","border-radius":"10px"},closeBoxMargin:"-6px -6px 2px 2px"}),l.open(p,t),g=!0,f=e.id}}var p,l,d={zoom:11,center:new google.maps.LatLng(-27.573704,153.055818),mapTypeId:google.maps.MapTypeId.ROADMAP},c={},m=[],g=!1,f=-1;return{initialiseMap:t,updateReadings:n}}angular.module("app.dashboard").factory("map",e),e.$inject=["dashboard"]}(),function(){"use strict";function e(e,t,n){function r(){console.log("querying server");var r=n.getToken(),o={headers:{Authorization:"Bearer "+r}};return e.get(t+"/api/readings",o)}function o(){return s}function i(n,r){var o={username:n,password:r};return e.post(t+"/api/login",o)}function a(){n.logout()}var s=[{id:"battery",name:"Battery",description:"Battery level of buoy",colour:"",units:"%",lowerBound:0,upperBound:100,display:!0,unconfigured:!1},{id:"turbidity",name:"Turbidity",description:"Water quality around buoy",colour:"",units:"g/ml",lowerBound:0,upperBound:70,display:!0,unconfigured:!1},{id:"pressure",name:"",description:"",colour:"",units:"",lowerBound:-1,upperBound:-1,display:!1,unconfigured:!0}];return{getReadings:r,getSensors:o,login:i,logout:a}}angular.module("app").factory("server",e),e.$inject=["$http","SERVER_ADDRESS","auth"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhdXRoL2F1dGgubW9kdWxlLmpzIiwiY29uZmlnL2NvbmZpZy5tb2R1bGUuanMiLCJkYXNoYm9hcmQvZGFzaGJvYXJkLm1vZHVsZS5qcyIsImFwcC5jb25maWcuanMiLCJhcHAuY29uc3RhbnRzLmpzIiwiYXBwLnJvdXRlcy5qcyIsImF1dGgvYXV0aC5jb250cm9sbGVyLmpzIiwiYXBwLmpzIiwiYXV0aC9hdXRoLnNlcnZpY2UuanMiLCJhdXRoL2F1dGhJbnRlcmNlcHRvci5zZXJ2aWNlLmpzIiwiY29uZmlnL2NvbmZpZy5jb250cm9sbGVyLmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5jb250cm9sbGVyLmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5zZXJ2aWNlLmpzIiwiZGFzaGJvYXJkL21hcC5zZXJ2aWNlLmpzIiwic2VydmljZXMvc2VydmVyLnNlcnZpY2UuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRkYXRlcGlja2VyUHJvdmlkZXIiLCIkdGltZXBpY2tlclByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsImludGVyY2VwdG9ycyIsInB1c2giLCJleHRlbmQiLCJkZWZhdWx0cyIsImF1dG9jbG9zZSIsImRhdGVGb3JtYXQiLCJtb2RlbERhdGVGb3JtYXQiLCJkYXRlVHlwZSIsInN0YXJ0V2VlayIsInRpbWVGb3JtYXQiLCJtb2RlbFRpbWVGb3JtYXQiLCJ0aW1lVHlwZSIsImNvbnN0YW50IiwicnVuIiwiJHJvb3RTY29wZSIsIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJBdXRoQ29udHJvbGxlciIsImF1dGgiLCJzZXJ2ZXIiLCJsb2dpbiIsInZtIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInRoZW4iLCJyZXMiLCJhdXRoZWQiLCJnbyIsInJlc2V0Rm9ybSIsImFsZXJ0IiwibG9nb3V0IiwidGhpcyIsIiRvbiIsImV2ZW50IiwidG9TdGF0ZSIsIm5hbWUiLCJwcmV2ZW50RGVmYXVsdCIsImlzIiwiJGluamVjdCIsIiR3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwidG9rZW4iLCJnZXRUb2tlbiIsInBhcmFtcyIsInBhcnNlSnd0IiwibW9tZW50IiwidW5peCIsImV4cCIsInNhdmVUb2tlbiIsImJhc2U2NFVybCIsInNwbGl0IiwiYmFzZTY0IiwicmVwbGFjZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJmYWN0b3J5IiwiYXV0aEludGVyY2VwdG9yIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiZGF0YSIsIkNvbmZpZ0NvbnRyb2xsZXIiLCJ0b2dnbGVFZGl0IiwiaW5kZXgiLCJzZW5zb3JzRWRpdCIsInNlbnNvcnMiLCJ1bmNvbmZpZ3VyZWQiLCJzZW5zb3JWYWxpZCIsInNlbnNvciIsInVuaXRzIiwiZ2V0U2Vuc29ycyIsImkiLCJsZW5ndGgiLCJEYXNoYm9hcmRDb250cm9sbGVyIiwiJGRvY3VtZW50IiwiZGFzaGJvYXJkIiwibWFwIiwidXBkYXRlQnVveXNGaWx0ZXIiLCJpZCIsImVuYWJsZWQiLCJidW95cyIsInVwZGF0ZUJ1b3lzIiwidXBkYXRlUmVhZGluZ3MiLCJ1cGRhdGVUaW1lc0ZpbHRlciIsInRpbWVzSW5wdXRzVmFsaWQiLCJtb21lbnRGb3JtYXQiLCJ0aW1lcyIsInR5cGUiLCJyYW5nZSIsImZyb20iLCJpbnB1dHMiLCJkYXRlIiwidGltZSIsInRvIiwicG9pbnQiLCJ1cGRhdGVUaW1lcyIsImZyb21EYXRlIiwiZnJvbVRpbWUiLCJ0b0RhdGUiLCJ0b1RpbWUiLCJ1cGRhdGVTZW5zb3JzRmlsdGVyIiwidXBkYXRlU2Vuc29ycyIsImluaXRpYWxpc2UiLCJ1cGRhdGVGaWx0ZXJzIiwicmVhZHkiLCJpbml0aWFsaXNlTWFwIiwiJGZpbHRlciIsInByb21pc2UiLCJnZXRSZWFkaW5ncyIsImNvbnNvbGUiLCJsb2ciLCJyZWFkaW5ncyIsInJlcG9wdWxhdGVGaWx0ZXJzIiwiaW5pdGlhbGlzZUZpbHRlcnMiLCJmaWx0ZXJzIiwicG9wdWxhdGVCdW95cyIsInBvaW50UmVhZGluZ3MiLCJzZW5zb3JJbnB1dHMiLCJwb3B1bGF0ZVNlbnNvcnMiLCJoYXNPd25Qcm9wZXJ0eSIsImJ1b3kiLCJmaWx0ZXJlZFJlYWRpbmdzIiwiZ2V0QnVveXMiLCJnZXRUaW1lcyIsImtleSIsImRpc3BsYXkiLCJjYWxjdWxhdGVQb2ludFJlYWRpbmdzIiwib3B0aW9ucyIsInNlbGVjdGVkIiwidmFsdWUiLCJnZXRPbGRlc3RSZWFkaW5nIiwib2xkZXN0IiwidGltZXN0YW1wIiwiaXNCZWZvcmUiLCJidW95UmVhZGluZ3MiLCJyZWFkaW5nIiwib2xkUmVhZGluZyIsIm5ld1JlYWRpbmciLCJkaWZmT2xkIiwiZGlmZiIsImRpZmZOZXciLCJNYXRoIiwiYWJzIiwiZmlsdGVyQnVveXMiLCJmaWx0ZXJUaW1lcyIsImZpbHRlclNlbnNvciIsImlzQmV0d2VlbiIsInBhcnNlSW50IiwiZ2V0UmVsYXRpdmVBZ2UiLCJtYXgiLCJtaW4iLCJjbG9uZSIsInN1YnRyYWN0IiwiY2FsY3VsYXRlQWdlSW5SYW5nZSIsIm5vUG9pIiwiZmVhdHVyZVR5cGUiLCJlbGVtZW50VHlwZSIsInN0eWxlcnMiLCJ2aXNpYmlsaXR5IiwibWFwT3B0aW9ucyIsInN0eWxlcyIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkTGlzdGVuZXIiLCJ6b29tIiwiZ2V0Wm9vbSIsImNlbnRlciIsImdldENlbnRlciIsIm1hcFR5cGVJZCIsImdldE1hcFR5cGVJZCIsImluZm9Cb3hPcGVuIiwiY2xvc2VJbmZvQm94IiwiYWRkTWFya2VyIiwiZW5hYmxlZFJlYWRpbmdzIiwibWFya2VycyIsImluZGV4T2YiLCJkaXNhYmxlTWFya2VyIiwic2V0T3BhY2l0eSIsImNhbGN1bGF0ZU9wYWNpdHkiLCJkaXNhYmxlZE1hcmtlcnMiLCJlbmFibGVNYXJrZXIiLCJtYXJrZXIiLCJNYXJrZXIiLCJwb3NpdGlvbiIsIkxhdExuZyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwib3BhY2l0eSIsIm9wZW5JbmZvQm94Iiwic2V0TWFwIiwiY3VycmVudE1hcmtlcklkIiwic3BsaWNlIiwiYWdlIiwibWluVmlzaWJsZU9wYWNpdHkiLCJpbmZvQm94IiwiY2xvc2UiLCJmb3JtYXR0ZWRUaW1lIiwiZm9ybWF0IiwiY29udGVudCIsImJhdHRlcnkiLCJwcmVzc3VyZSIsInNlYWxldmVsIiwidHVyYmlkaXR5IiwiSW5mb0JveCIsInBpeGVsT2Zmc2V0IiwiU2l6ZSIsInpJbmRleCIsImJveFN0eWxlIiwiY29sb3IiLCJiYWNrZ3JvdW5kLWNvbG9yIiwid2lkdGgiLCJwYWRkaW5nIiwiYm9yZGVyLXJhZGl1cyIsImNsb3NlQm94TWFyZ2luIiwib3BlbiIsIk1hcFR5cGVJZCIsIlJPQURNQVAiLCIkaHR0cCIsIlNFUlZFUl9BRERSRVNTIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJnZXQiLCJkdW1teVNlbnNvcnMiLCJwb3N0IiwiZGVzY3JpcHRpb24iLCJjb2xvdXIiLCJsb3dlckJvdW5kIiwidXBwZXJCb3VuZCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUFBQyxPQUFBLE9BQ0EsWUFDQSxpQkFDQSxvQ0FDQSxvQ0FDQSxzQ0FDQSx5QkFDQSw0QkFDQSw0QkFDQSx3QkFDQSx3QkFDQSxXQUVBLFdBQ0EsZ0JBQ0Esa0JDbEJBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxrQkNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsb0JDSEEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLHVCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSxPQUNBQyxRQUFBLHNCQUFBLHNCQUFBLGdCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBRUFBLEVBQUFDLGFBQUFDLEtBQUEsbUJBRUFQLFFBQUFRLE9BQUFMLEVBQUFNLFVBQ0FDLFdB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QUFBbUwsR0FBQUksSUFBQUgsRUFBQSxnQkFBQTFPLEdBR0EsUUFBQW1GLEtBQ0EsTUFBQTJKLEdBR0EsUUFBQTlNLEdBQUFFLEVBQUFDLEdBQ0EsR0FBQXNDLElBQ0F2QyxTQUFBQSxFQUNBQyxTQUFBQSxFQUVBLE9BQUFzTSxHQUFBTSxLQUFBTCxFQUFBLGFBQUFqSyxHQUdBLFFBQUEvQixLQUNBWixFQUFBWSxTQXJJQSxHQWdFQW9NLEtBRUFuSixHQUFBLFVBQ0E1QyxLQUFBLFVBQ0FpTSxZQUFBLHdCQUNBQyxPQUFBLEdBQ0EvSixNQUFBLElBQ0FnSyxXQUFBLEVBQ0FDLFdBQUEsSUFDQXpHLFNBQUEsRUFDQTNELGNBQUEsSUFHQVksR0FBQSxZQUNBNUMsS0FBQSxZQUNBaU0sWUFBQSw0QkFDQUMsT0FBQSxHQUNBL0osTUFBQSxPQUNBZ0ssV0FBQSxFQUNBQyxXQUFBLEdBQ0F6RyxTQUFBLEVBQ0EzRCxjQUFBLElBR0FZLEdBQUEsV0FDQTVDLEtBQUEsR0FDQWlNLFlBQUEsR0FDQUMsT0FBQSxHQUNBL0osTUFBQSxHQUNBZ0ssV0FBQSxHQUNBQyxXQUFBLEdBQ0F6RyxTQUFBLEVBQ0EzRCxjQUFBLEdBSUEsUUFDQTBDLFlBQUFBLEVBQ0F0QyxXQUFBQSxFQUNBbkQsTUFBQUEsRUFDQVUsT0FBQUEsR0E3R0E1QyxRQUFBQyxPQUFBLE9BQ0FzRSxRQUFBLFNBQUF0QyxHUDY5QkNBLEVBQU9tQixTQUFXLFFBQVMsaUJBQWtCIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIFxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcclxuICAgICAgICAndWkucm91dGVyJyxcclxuICAgICAgICAnbWdjcmVhLm5nU3RyYXAnLFxyXG4gICAgICAgICdtZ2NyZWEubmdTdHJhcC5oZWxwZXJzLmRpbWVuc2lvbnMnLFxyXG4gICAgICAgICdtZ2NyZWEubmdTdHJhcC5oZWxwZXJzLmRhdGVQYXJzZXInLFxyXG4gICAgICAgICdtZ2NyZWEubmdTdHJhcC5oZWxwZXJzLnBhcnNlT3B0aW9ucycsXHJcbiAgICAgICAgJ21nY3JlYS5uZ1N0cmFwLnRvb2x0aXAnLFxyXG4gICAgICAgICdtZ2NyZWEubmdTdHJhcC5kYXRlcGlja2VyJyxcclxuICAgICAgICAnbWdjcmVhLm5nU3RyYXAudGltZXBpY2tlcicsXHJcbiAgICAgICAgJ21nY3JlYS5uZ1N0cmFwLmJ1dHRvbicsXHJcbiAgICAgICAgJ21nY3JlYS5uZ1N0cmFwLnNlbGVjdCcsXHJcbiAgICAgICAgJ2NoYXJ0LmpzJyxcclxuICAgICAgICBcclxuICAgICAgICAnYXBwLmF1dGgnLFxyXG4gICAgICAgICdhcHAuZGFzaGJvYXJkJyxcclxuICAgICAgICAnYXBwLmNvbmZpZydcclxuICAgIF0pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0XHJcblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hdXRoJywgW10pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0XHJcblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb25maWcnLCBbXSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHRcclxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRhc2hib2FyZCcsIFtdKTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cdFxyXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbmZpZyhmdW5jdGlvbigkZGF0ZXBpY2tlclByb3ZpZGVyLCAkdGltZXBpY2tlclByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcclxuXHRcdFx0XHJcblx0XHRcdGFuZ3VsYXIuZXh0ZW5kKCRkYXRlcGlja2VyUHJvdmlkZXIuZGVmYXVsdHMsIHtcclxuXHRcdFx0XHRhdXRvY2xvc2U6IHRydWUsXHJcblx0XHRcdFx0ZGF0ZUZvcm1hdDogJ2QvTS95eScsXHJcblx0XHRcdFx0bW9kZWxEYXRlRm9ybWF0OiAnZC9NL3l5JyxcclxuXHRcdFx0XHRkYXRlVHlwZTogJ3N0cmluZycsXHJcblx0XHRcdFx0c3RhcnRXZWVrOiAxXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0YW5ndWxhci5leHRlbmQoJHRpbWVwaWNrZXJQcm92aWRlci5kZWZhdWx0cywge1xyXG5cdFx0XHRcdGF1dG9jbG9zZTogZmFsc2UsXHJcblx0XHRcdFx0dGltZUZvcm1hdDogJ2g6bW0gYScsXHJcblx0XHRcdFx0bW9kZWxUaW1lRm9ybWF0OiAnaDptbSBhJyxcclxuXHRcdFx0XHR0aW1lVHlwZTogJ3N0cmluZydcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cdFxyXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnN0YW50KCdTRVJWRVJfQUREUkVTUycsICdodHRwOi8vbG9jYWxob3N0OjgwODAnKTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cdFxyXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdFx0LnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcykge1xyXG5cdFx0XHQvLyBhbGxvdyBhY2Nlc3MgdG8gc3RhdGUgZnJvbSBhbnkgc2NvcGVzLCB1c2VmdWwgZm9yIGNzcyBvbiBuYXZpZ2F0aW9uXHJcblx0XHRcdCRyb290U2NvcGUuJHN0YXRlID0gJHN0YXRlO1xyXG5cdFx0XHQkcm9vdFNjb3BlLiRzdGF0ZVBhcmFtcyA9ICRzdGF0ZVBhcmFtcztcclxuXHRcdH0pXHJcblx0XHRcclxuXHRcdC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG5cdFx0XHRcclxuXHRcdFx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2Rhc2hib2FyZCcpO1xyXG5cdFx0XHRcclxuXHRcdFx0JHN0YXRlUHJvdmlkZXJcclxuXHRcdFx0XHQuc3RhdGUoJ2xvZ2luJywge1xyXG5cdFx0XHRcdFx0dXJsOiAnL2xvZ2luJyxcclxuXHRcdFx0XHRcdC8vIGNvbnRyb2xsZXI6ICdBdXRoQ29udHJvbGxlcicsIG5vdyB1c2VzIHBhcmVudCBjb250cm9sbGVyXHJcblx0XHRcdFx0XHQvLyBjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9hcHAvYXV0aC9sb2dpbi5odG1sJ1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnN0YXRlKCdkYXNoYm9hcmQnLCB7XHJcblx0XHRcdFx0XHR1cmw6ICcvZGFzaGJvYXJkJyxcclxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDb250cm9sbGVyJyxcclxuXHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2FwcC9kYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWwnXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuc3RhdGUoJ2NvbmZpZycsIHtcclxuXHRcdFx0XHRcdHVybDogJy9jb25maWcnLFxyXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogJ0NvbmZpZ0NvbnRyb2xsZXInLFxyXG5cdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvYXBwL2NvbmZpZy9jb25maWcuaHRtbCdcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5zdGF0ZSgnd2FybmluZ3MnLCB7XHJcblx0XHRcdFx0XHR1cmw6ICcvd2FybmluZ3MnXHJcblx0XHRcdFx0XHQvLyBjb250cm9sbGVyOiAnV2FybmluZ3NDb250cm9sbGVyJyxcclxuXHRcdFx0XHRcdC8vIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0XHRcdC8vIHRlbXBsYXRlVXJsOiAnL2FwcC93YXJuaW5ncy93YXJuaW5ncy5odG1sJ1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHRcclxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmF1dGgnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0F1dGhDb250cm9sbGVyJywgQXV0aENvbnRyb2xsZXIpO1xyXG5cdFxyXG5cdGZ1bmN0aW9uIEF1dGhDb250cm9sbGVyKCRyb290U2NvcGUsICRzdGF0ZSwgYXV0aCwgc2VydmVyKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0XHJcblx0XHR2bS5hdXRoZWQgPSBhdXRoLmF1dGhlZCgpO1xyXG5cdFx0dm0ubG9naW4gPSBsb2dpbjtcclxuXHRcdHZtLmxvZ291dCA9IGxvZ291dDtcclxuXHRcdFxyXG5cdFx0cmVzZXRGb3JtKCk7XHJcblx0XHRcclxuXHRcdC8vIFJlZGlyZWN0IHRvIGxvZ2luIHBhZ2UgaWYgbm90IGxvZ2dlZCBpbiwgb3RoZXJ3aXNlIHJlZGlyZWN0IGZyb20gbG9naW4gcGFnZVxyXG5cdFx0JHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUpIHtcclxuXHRcdFx0aWYgKGF1dGguYXV0aGVkKCkpIHtcclxuXHRcdFx0XHRpZiAodG9TdGF0ZS5uYW1lID09ICdsb2dpbicpIHtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRpZiAoJHN0YXRlLmlzKCdsb2dpbicpKSB7XHJcblx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnZGFzaGJvYXJkJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmICh0b1N0YXRlLm5hbWUgIT0gJ2xvZ2luJykge1xyXG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdCRzdGF0ZS5nbygnbG9naW4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBsb2dpbigpIHtcclxuXHRcdFx0c2VydmVyLmxvZ2luKHZtLnVzZXJuYW1lLCB2bS5wYXNzd29yZCkudGhlbihcclxuXHRcdFx0ZnVuY3Rpb24ocmVzKSB7XHJcblx0XHRcdFx0aWYgKGF1dGguYXV0aGVkKCkpIHtcclxuXHRcdFx0XHRcdHZtLmF1dGhlZCA9IHRydWU7XHJcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ2Rhc2hib2FyZCcpO1xyXG5cdFx0XHRcdFx0cmVzZXRGb3JtKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRmdW5jdGlvbihyZXMpIHtcclxuXHRcdFx0XHRhbGVydCgnSW52YWxpZCB1c2VybmFtZSBvciBwYXNzd29yZCcpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gbG9nb3V0KCkge1xyXG5cdFx0XHRzZXJ2ZXIubG9nb3V0KCk7XHJcblx0XHRcdHZtLmF1dGhlZCA9IGZhbHNlO1xyXG5cdFx0XHQkc3RhdGUuZ28oJ2xvZ2luJyk7XHRcdFx0XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcclxuXHRcdFx0dm0udXNlcm5hbWUgPSBcImltYWZha2VcIjsgLy8gb2J2aW91c2x5IGdldCByaWQgb2YgdGhlc2VcclxuXHRcdFx0dm0ucGFzc3dvcmQgPSBcImVrYWZhbWlcIjtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7IixudWxsLCIvKiBnbG9iYWwgbW9tZW50ICovXHJcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0XHJcblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hdXRoJylcclxuXHRcdC5mYWN0b3J5KCdhdXRoJywgYXV0aCk7XHJcblx0XHJcblx0ZnVuY3Rpb24gYXV0aCgkd2luZG93KSB7XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bG9naW46IGxvZ2luLFxyXG5cdFx0XHRsb2dvdXQ6IGxvZ291dCxcclxuXHRcdFx0YXV0aGVkOiBhdXRoZWQsXHJcblx0XHRcdGdldFRva2VuOiBnZXRUb2tlbixcclxuXHRcdFx0c2F2ZVRva2VuOiBzYXZlVG9rZW5cclxuXHRcdH07XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xyXG5cdFx0XHRcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gbG9nb3V0KCkge1xyXG5cdFx0XHQkd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBhdXRoZWQoKSB7XHJcblx0XHRcdHZhciB0b2tlbiA9IGdldFRva2VuKCk7XHJcblx0XHRcdGlmKHRva2VuKSB7XHJcblx0XHRcdFx0dmFyIHBhcmFtcyA9IHBhcnNlSnd0KHRva2VuKTtcclxuXHRcdFx0XHRyZXR1cm4gKG1vbWVudCgpLnVuaXgoKSA8PSBwYXJhbXMuZXhwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFx0XHJcblx0XHRmdW5jdGlvbiBzYXZlVG9rZW4odG9rZW4pIHtcclxuXHRcdFx0JHdpbmRvdy5sb2NhbFN0b3JhZ2VbJ3Rva2VuJ10gPSB0b2tlbjtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gZ2V0VG9rZW4odG9rZW4pIHtcclxuXHRcdFx0cmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlWyd0b2tlbiddO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBwYXJzZUp3dCh0b2tlbikge1xyXG5cdFx0XHR2YXIgYmFzZTY0VXJsID0gdG9rZW4uc3BsaXQoJy4nKVsxXTtcclxuXHRcdFx0dmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKCctJywgJysnKS5yZXBsYWNlKCdfJywgJy8nKTtcclxuXHRcdFx0cmV0dXJuIEpTT04ucGFyc2UoJHdpbmRvdy5hdG9iKGJhc2U2NCkpO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cdFxyXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXV0aCcpXHJcblx0XHQuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJywgYXV0aEludGVyY2VwdG9yKTtcclxuXHRcclxuXHRmdW5jdGlvbiBhdXRoSW50ZXJjZXB0b3IoYXV0aCkge1xyXG5cdFx0XHJcblx0XHRcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlcXVlc3Q6IHJlcXVlc3QsXHJcblx0XHRcdHJlc3BvbnNlOiByZXNwb25zZVxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gcmVxdWVzdChjb25maWcpIHtcclxuXHRcdFx0cmV0dXJuIGNvbmZpZztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gcmVzcG9uc2UocmVzKSB7XHJcblx0XHRcdGlmIChyZXMuZGF0YS50b2tlbikge1xyXG5cdFx0XHRcdGF1dGguc2F2ZVRva2VuKHJlcy5kYXRhLnRva2VuKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0XHJcblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb25maWcnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0NvbmZpZ0NvbnRyb2xsZXInLCBDb25maWdDb250cm9sbGVyKTtcclxuXHRcclxuXHRmdW5jdGlvbiBDb25maWdDb250cm9sbGVyKHNlcnZlcikge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdFxyXG5cdFx0dm0uc2Vuc29ycyA9IHNlcnZlci5nZXRTZW5zb3JzKCk7XHJcblx0XHR2bS5zZW5zb3JzRWRpdCA9IFtdO1xyXG5cdFx0dm0udG9nZ2xlRWRpdCA9IHRvZ2dsZUVkaXQ7XHJcblx0XHR2bS5zZW5zb3JWYWxpZCA9IHNlbnNvclZhbGlkO1xyXG5cdFx0XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZtLnNlbnNvcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dm0uc2Vuc29yc0VkaXQucHVzaChmYWxzZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHRvZ2dsZUVkaXQoaW5kZXgpIHtcclxuXHRcdFx0aWYgKHZtLnNlbnNvcnNFZGl0W2luZGV4XSkge1xyXG5cdFx0XHRcdHZtLnNlbnNvcnNbaW5kZXhdLnVuY29uZmlndXJlZCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZtLnNlbnNvcnNFZGl0W2luZGV4XSA9ICF2bS5zZW5zb3JzRWRpdFtpbmRleF07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHNlbnNvclZhbGlkKHNlbnNvcikge1xyXG5cdFx0XHRpZiAoIXNlbnNvci5uYW1lIHx8ICFzZW5zb3IudW5pdHMpIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0XHJcblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kYXNoYm9hcmQnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0Rhc2hib2FyZENvbnRyb2xsZXInLCBEYXNoYm9hcmRDb250cm9sbGVyKTtcclxuXHRcdFxyXG5cdGZ1bmN0aW9uIERhc2hib2FyZENvbnRyb2xsZXIoJGRvY3VtZW50LCBkYXNoYm9hcmQsIG1hcCkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdFx0XHJcblx0XHR2bS5idW95cyA9IGRhc2hib2FyZC5idW95cygpO1xyXG5cdFx0dm0udGltZXMgPSBkYXNoYm9hcmQudGltZXMoKTtcclxuXHRcdHZtLnNlbnNvcnMgPSBkYXNoYm9hcmQuc2Vuc29ycygpO1xyXG5cdFx0dm0udXBkYXRlQnVveXNGaWx0ZXIgPSB1cGRhdGVCdW95c0ZpbHRlcjtcclxuXHRcdHZtLnVwZGF0ZVRpbWVzRmlsdGVyID0gdXBkYXRlVGltZXNGaWx0ZXI7XHJcblx0XHR2bS51cGRhdGVTZW5zb3JzRmlsdGVyID0gdXBkYXRlU2Vuc29yc0ZpbHRlcjtcclxuXHRcdFxyXG5cdFx0ZGFzaGJvYXJkLmluaXRpYWxpc2UoKS50aGVuKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2bS5idW95cyA9IGRhc2hib2FyZC5idW95cygpO1xyXG5cdFx0XHR2bS50aW1lcyA9IGRhc2hib2FyZC50aW1lcygpO1xyXG5cdFx0XHR2bS5zZW5zb3JzID0gZGFzaGJvYXJkLnNlbnNvcnMoKTtcclxuXHRcdFx0XHJcblx0XHRcdGRhc2hib2FyZC51cGRhdGVGaWx0ZXJzKCk7XHJcblx0XHRcdG1hcC51cGRhdGVSZWFkaW5ncygpO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHZhciBkYXRlRm9ybWF0ID0gXCJEL00vWVlcIjtcclxuXHRcdHZhciB0aW1lRm9ybWF0ID0gXCJoOm1tIEFcIjtcclxuXHRcdFx0XHJcblx0XHQkZG9jdW1lbnQucmVhZHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdG1hcC5pbml0aWFsaXNlTWFwKCk7XHJcblx0XHRcdC8vIGRhc2hib2FyZC51cGRhdGVGaWx0ZXJzKCk7XHJcblx0XHRcdC8vIG1hcC51cGRhdGVSZWFkaW5ncygpO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUJ1b3lzRmlsdGVyKGlkLCBlbmFibGVkKSB7XHJcblx0XHRcdHZtLmJ1b3lzW2lkXSA9IGVuYWJsZWQ7XHJcblx0XHRcdGRhc2hib2FyZC51cGRhdGVCdW95cygpO1xyXG5cdFx0XHRtYXAudXBkYXRlUmVhZGluZ3MoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlVGltZXNGaWx0ZXIoKSB7XHJcblx0XHRcdC8vIGNvbnZlcnQgaW5wdXQgc3RyaW5ncyB0byBtb21lbnRzIFxyXG5cdFx0XHQvLyBhbmQgdXBkYXRlIHZtLnRpbWVzLCB3aGljaCB1cGRhdGVzIHJlZmVyZW5jZSBpbiBkYXNoYm9hcmQgc2VydmljZVxyXG5cdFx0XHRpZiAodGltZXNJbnB1dHNWYWxpZCgpKSB7XHJcblx0XHRcdFx0dmFyIG1vbWVudEZvcm1hdCA9IGRhdGVGb3JtYXQgKyBcIiBcIiArIHRpbWVGb3JtYXQ7XHJcblx0XHRcdFx0aWYgKHZtLnRpbWVzLnR5cGUgPT0gJ3JhbmdlJykge1xyXG5cdFx0XHRcdFx0dm0udGltZXMucmFuZ2UuZnJvbSA9IG1vbWVudCh2bS50aW1lcy5pbnB1dHMucmFuZ2UuZnJvbS5kYXRlXHJcblx0XHRcdFx0XHRcdCsgXCIgXCIgKyB2bS50aW1lcy5pbnB1dHMucmFuZ2UuZnJvbS50aW1lLCBtb21lbnRGb3JtYXQpO1xyXG5cdFx0XHRcdFx0dm0udGltZXMucmFuZ2UudG8gPSBtb21lbnQodm0udGltZXMuaW5wdXRzLnJhbmdlLnRvLmRhdGVcclxuXHRcdFx0XHRcdFx0KyBcIiBcIiArIHZtLnRpbWVzLmlucHV0cy5yYW5nZS50by50aW1lLCBtb21lbnRGb3JtYXQpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAodm0udGltZXMudHlwZSA9PSAncG9pbnQnKSB7XHJcblx0XHRcdFx0XHR2bS50aW1lcy5wb2ludCA9IG1vbWVudCh2bS50aW1lcy5pbnB1dHMucG9pbnQuZGF0ZVxyXG5cdFx0XHRcdFx0XHQrIFwiIFwiICsgdm0udGltZXMuaW5wdXRzLnBvaW50LnRpbWUsIG1vbWVudEZvcm1hdCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGRhc2hib2FyZC51cGRhdGVUaW1lcygpO1xyXG5cdFx0XHRcdG1hcC51cGRhdGVSZWFkaW5ncygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHRpbWVzSW5wdXRzVmFsaWQoKSB7XHJcblx0XHRcdGlmICh2bS50aW1lcy50eXBlID09ICdhbGwnKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHZtLnRpbWVzLnR5cGUgPT0gJ3JhbmdlJykge1xyXG5cdFx0XHRcdC8vIHZhbGlkIGNvbWJpbmF0aW9uczogYWxsIGZpbGxlZCwgZGF0ZXMgZmlsbGVkLCB0aW1lcyBmaWxsZWRcclxuXHRcdFx0XHR2YXIgZnJvbURhdGUgPSB2bS50aW1lcy5pbnB1dHMucmFuZ2UuZnJvbS5kYXRlO1xyXG5cdFx0XHRcdHZhciBmcm9tVGltZSA9IHZtLnRpbWVzLmlucHV0cy5yYW5nZS5mcm9tLnRpbWU7XHJcblx0XHRcdFx0dmFyIHRvRGF0ZSA9IHZtLnRpbWVzLmlucHV0cy5yYW5nZS50by5kYXRlO1xyXG5cdFx0XHRcdHZhciB0b1RpbWUgPSB2bS50aW1lcy5pbnB1dHMucmFuZ2UudG8udGltZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZnJvbURhdGUgJiYgZnJvbVRpbWUgJiYgdG9EYXRlICYmIHRvVGltZSkgcmV0dXJuIHRydWU7XHJcblx0XHRcdFx0Ly8gaWYgKGZyb21EYXRlICYmICFmcm9tVGltZSAmJiB0b0RhdGUgJiYgIXRvVGltZSkgcmV0dXJuIHRydWU7XHJcblx0XHRcdFx0Ly8gaWYgKGZyb21EYXRlICYmIGZyb21UaW1lICYmIHRvRGF0ZSAmJiB0b1RpbWUpIHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh2bS50aW1lcy50eXBlID09ICdwb2ludCcpIHtcclxuXHRcdFx0XHQvLyBtdXN0IGhhdmUgZGF0ZSwgdGltZSBpcyBvcHRpb25hbFxyXG5cdFx0XHRcdGlmICh2bS50aW1lcy5pbnB1dHMucG9pbnQuZGF0ZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZVNlbnNvcnNGaWx0ZXIoKSB7XHJcblx0XHRcdGRhc2hib2FyZC51cGRhdGVTZW5zb3JzKCk7XHJcblx0XHRcdG1hcC51cGRhdGVSZWFkaW5ncygpO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cdFxyXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGFzaGJvYXJkJylcclxuXHRcdC5mYWN0b3J5KCdkYXNoYm9hcmQnLCBkYXNoYm9hcmQpO1xyXG5cdFx0XHJcblx0ZnVuY3Rpb24gZGFzaGJvYXJkKCRmaWx0ZXIsIHNlcnZlcikge1xyXG5cdFx0dmFyIHJlYWRpbmdzID0gW107XHJcblx0XHR2YXIgZmlsdGVyZWRSZWFkaW5ncyA9IFtdO1xyXG5cdFx0XHJcblx0XHR2YXIgZmlsdGVycyA9IHt9O1xyXG5cdFx0aW5pdGlhbGlzZUZpbHRlcnMoKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0aW5pdGlhbGlzZTogaW5pdGlhbGlzZSxcclxuXHRcdFx0cmVhZGluZ3M6IGdldFJlYWRpbmdzLFxyXG5cdFx0XHRidW95czogZ2V0QnVveXMsXHJcblx0XHRcdHRpbWVzOiBnZXRUaW1lcyxcclxuXHRcdFx0c2Vuc29yczogZ2V0U2Vuc29ycyxcclxuXHRcdFx0dXBkYXRlQnVveXM6IHVwZGF0ZUJ1b3lzLFxyXG5cdFx0XHR1cGRhdGVUaW1lczogdXBkYXRlVGltZXMsXHJcblx0XHRcdHVwZGF0ZUZpbHRlcnM6IHVwZGF0ZUZpbHRlcnMsXHJcblx0XHRcdHVwZGF0ZVNlbnNvcnM6IHVwZGF0ZVNlbnNvcnMsXHJcblx0XHRcdGdldE9sZGVzdFJlYWRpbmc6IGdldE9sZGVzdFJlYWRpbmcsXHJcblx0XHRcdGdldFJlbGF0aXZlQWdlOiBnZXRSZWxhdGl2ZUFnZVxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gaW5pdGlhbGlzZSgpIHtcclxuXHRcdFx0dmFyIHByb21pc2UgPSBzZXJ2ZXIuZ2V0UmVhZGluZ3MoKTtcclxuXHRcdFx0cHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlcykge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHJlcyk7XHJcblx0XHRcdFx0cmVhZGluZ3MgPSByZXMuZGF0YTtcclxuXHRcdFx0XHRyZXBvcHVsYXRlRmlsdGVycygpO1xyXG5cdFx0XHR9LCBmdW5jdGlvbihyZXMpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3InKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXMpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIHByb21pc2U7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGluaXRpYWxpc2VGaWx0ZXJzKCkge1xyXG5cdFx0XHRmaWx0ZXJzLmJ1b3lzID0ge307IC8vIHsgYnVveUlkOiBlbmFibGVkIH1cclxuXHRcdFx0cG9wdWxhdGVCdW95cygpO1xyXG5cdFx0XHRcclxuXHRcdFx0ZmlsdGVycy50aW1lcyA9IHtcclxuXHRcdFx0XHR0eXBlOiBcImFsbFwiLFxyXG5cdFx0XHRcdHJhbmdlOiB7IGZyb206IG51bGwsIHRvOiBudWxsIH0sIC8vIGZyb20gYW5kIHRvIGNvbnRhaW4gbW9tZW50c1xyXG5cdFx0XHRcdHBvaW50OiBudWxsLFxyXG5cdFx0XHRcdHBvaW50UmVhZGluZ3M6IHt9LCAvLyBjb250YWlucyBsaXN0IG9mIGNsb3Nlc3QgcmVhZGluZ3MgdG8gcG9pbnRcclxuXHRcdFx0XHRpbnB1dHM6IHtcclxuXHRcdFx0XHRcdHJhbmdlOiB7XHJcblx0XHRcdFx0XHRcdGZyb206IHsgZGF0ZTogXCJcIiwgdGltZTogXCJcIiB9LFxyXG5cdFx0XHRcdFx0XHR0bzogeyBkYXRlOiBcIlwiLCB0aW1lOiBcIlwiIH0sXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0cG9pbnQ6IHsgZGF0ZTogXCJcIiwgdGltZTogXCJcIiB9LFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0ZmlsdGVycy5zZW5zb3JzID0ge307XHJcblx0XHRcdGZpbHRlcnMuc2Vuc29ySW5wdXRzID0ge307XHJcblx0XHRcdHBvcHVsYXRlU2Vuc29ycygpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiByZXBvcHVsYXRlRmlsdGVycygpIHtcclxuXHRcdFx0cG9wdWxhdGVCdW95cygpO1xyXG5cdFx0XHRwb3B1bGF0ZVNlbnNvcnMoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gcG9wdWxhdGVCdW95cygpIHtcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZWFkaW5ncy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmICghZmlsdGVycy5idW95cy5oYXNPd25Qcm9wZXJ0eShyZWFkaW5nc1tpXS5idW95KSkge1xyXG5cdFx0XHRcdFx0ZmlsdGVycy5idW95c1tyZWFkaW5nc1tpXS5idW95XSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0UmVhZGluZ3MoKSB7XHJcblx0XHRcdHJldHVybiBmaWx0ZXJlZFJlYWRpbmdzO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBnZXRCdW95cygpIHtcclxuXHRcdFx0cmV0dXJuIGZpbHRlcnMuYnVveXM7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGdldFRpbWVzKCkge1xyXG5cdFx0XHRyZXR1cm4gZmlsdGVycy50aW1lcztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gZ2V0U2Vuc29ycygpIHtcclxuXHRcdFx0cG9wdWxhdGVTZW5zb3JzKCk7XHJcblx0XHRcdGZvciAodmFyIGtleSBpbiBmaWx0ZXJzLnNlbnNvcklucHV0cykge1xyXG5cdFx0XHRcdGlmIChmaWx0ZXJzLnNlbnNvcklucHV0cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcblx0XHRcdFx0XHRmaWx0ZXJzLnNlbnNvcnNba2V5XS5pbnB1dHMgPSBmaWx0ZXJzLnNlbnNvcklucHV0c1trZXldO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgc2Vuc29ycyA9IFtdOyBcclxuXHRcdFx0Zm9yICh2YXIga2V5IGluIGZpbHRlcnMuc2Vuc29ycykge1xyXG5cdFx0XHRcdGlmIChmaWx0ZXJzLnNlbnNvcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG5cdFx0XHRcdFx0aWYgKGZpbHRlcnMuc2Vuc29yc1trZXldLmRpc3BsYXkpIHtcclxuXHRcdFx0XHRcdFx0c2Vuc29ycy5wdXNoKGZpbHRlcnMuc2Vuc29yc1trZXldKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHNlbnNvcnM7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUJ1b3lzKCkge1xyXG5cdFx0XHR1cGRhdGVGaWx0ZXJzKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZVRpbWVzKCkge1xyXG5cdFx0XHRpZiAoZmlsdGVycy50aW1lcy50eXBlID09ICdwb2ludCcpIHtcclxuXHRcdFx0XHRjYWxjdWxhdGVQb2ludFJlYWRpbmdzKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0dXBkYXRlRmlsdGVycygpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiB1cGRhdGVTZW5zb3JzKCkge1xyXG5cdFx0XHR1cGRhdGVGaWx0ZXJzKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHBvcHVsYXRlU2Vuc29ycygpIHtcclxuXHRcdFx0dmFyIHNlbnNvcnMgPSBzZXJ2ZXIuZ2V0U2Vuc29ycygpO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbnNvcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRmaWx0ZXJzLnNlbnNvcnNbc2Vuc29yc1tpXS5pZF0gPSBzZW5zb3JzW2ldO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghZmlsdGVycy5zZW5zb3JJbnB1dHMuaGFzT3duUHJvcGVydHkoc2Vuc29yc1tpXS5pZCkpIHtcclxuXHRcdFx0XHRcdGZpbHRlcnMuc2Vuc29ySW5wdXRzW3NlbnNvcnNbaV0uaWRdID0ge1xyXG5cdFx0XHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0b3B0aW9uczogW1wiPlwiLCBcIjxcIiwgXCI9XCJdLFxyXG5cdFx0XHRcdFx0XHRzZWxlY3RlZDogXCI+XCIsXHJcblx0XHRcdFx0XHRcdHZhbHVlOiBcIlwiXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGRpc2FibGUgaW5wdXRzIHdoaWNoIGFyZW4ndCBzZXQgdG8gZGlzcGxheVxyXG5cdFx0XHRcdGlmICghc2Vuc29yc1tpXS5kaXNwbGF5KSB7XHJcblx0XHRcdFx0XHRmaWx0ZXJzLnNlbnNvcklucHV0c1tzZW5zb3JzW2ldLmlkXS5lbmFibGVkID0gZmFsc2U7XHJcblx0XHRcdFx0fVx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gZ2V0T2xkZXN0UmVhZGluZygpIHtcclxuXHRcdFx0dmFyIHJlYWRpbmdzID0gZmlsdGVyZWRSZWFkaW5ncztcclxuXHRcdFx0dmFyIG9sZGVzdCA9IG1vbWVudC51bml4KHJlYWRpbmdzWzBdLnRpbWVzdGFtcCk7XHJcblx0XHRcdGZvciAodmFyIGkgPSAxOyBpIDwgcmVhZGluZ3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRpZiAobW9tZW50LnVuaXgocmVhZGluZ3NbaV0udGltZXN0YW1wKS5pc0JlZm9yZShvbGRlc3QpKSB7XHJcblx0XHRcdFx0XHRvbGRlc3QgPSBtb21lbnQudW5peChyZWFkaW5nc1tpXS50aW1lc3RhbXApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gb2xkZXN0O1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBjYWxjdWxhdGVQb2ludFJlYWRpbmdzKCkge1xyXG5cdFx0XHR2YXIgYnVveVJlYWRpbmdzID0ge307XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVhZGluZ3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgcmVhZGluZyA9IHJlYWRpbmdzW2ldO1xyXG5cdFx0XHRcdGlmIChidW95UmVhZGluZ3MuaGFzT3duUHJvcGVydHkocmVhZGluZy5idW95KSkge1xyXG5cdFx0XHRcdFx0Ly8gZGV0ZXJtaW5lIHdoaWNoIHJlYWRpbmcgaXMgY2xvc2VyIHRvIHBvaW50XHJcblx0XHRcdFx0XHR2YXIgb2xkUmVhZGluZyA9IGJ1b3lSZWFkaW5nc1tyZWFkaW5nLmJ1b3ldLnRpbWU7XHJcblx0XHRcdFx0XHR2YXIgbmV3UmVhZGluZyA9IHJlYWRpbmcudGltZXN0YW1wO1xyXG5cdFx0XHRcdFx0XHRcdCBcclxuXHRcdFx0XHRcdHZhciBkaWZmT2xkID0gbW9tZW50LnVuaXgob2xkUmVhZGluZykuZGlmZihmaWx0ZXJzLnRpbWVzLnBvaW50KTtcclxuXHRcdFx0XHRcdHZhciBkaWZmTmV3ID0gbW9tZW50LnVuaXgobmV3UmVhZGluZykuZGlmZihmaWx0ZXJzLnRpbWVzLnBvaW50KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKE1hdGguYWJzKGRpZmZOZXcpIDwgTWF0aC5hYnMoZGlmZk9sZCkpIHtcclxuXHRcdFx0XHRcdFx0YnVveVJlYWRpbmdzW3JlYWRpbmcuYnVveV0gPSB7XHJcblx0XHRcdFx0XHRcdFx0aWQ6IHJlYWRpbmcuaWQsXHJcblx0XHRcdFx0XHRcdFx0dGltZTogcmVhZGluZy50aW1lc3RhbXBcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdH0gXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGJ1b3lSZWFkaW5nc1tyZWFkaW5nLmJ1b3ldID0ge1xyXG5cdFx0XHRcdFx0XHRpZDogcmVhZGluZy5pZCxcclxuXHRcdFx0XHRcdFx0dGltZTogcmVhZGluZy50aW1lc3RhbXBcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGZpbHRlcnMudGltZXMucG9pbnRSZWFkaW5ncyA9IGJ1b3lSZWFkaW5ncztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlRmlsdGVycygpIHtcclxuXHRcdFx0ZmlsdGVyZWRSZWFkaW5ncyA9ICRmaWx0ZXIoJ2ZpbHRlcicpKHJlYWRpbmdzLCBmdW5jdGlvbihyZWFkaW5nKSB7XHJcblx0XHRcdFx0aWYgKCFmaWx0ZXJCdW95cyhyZWFkaW5nKSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdGlmICghZmlsdGVyVGltZXMocmVhZGluZykpIHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gZmlsdGVycy5zZW5zb3JJbnB1dHMpIHtcclxuXHRcdFx0XHRcdGlmIChmaWx0ZXJzLnNlbnNvcklucHV0cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcblx0XHRcdFx0XHRcdGlmICghZmlsdGVyU2Vuc29yKGtleSwgZmlsdGVycy5zZW5zb3JJbnB1dHNba2V5XSwgcmVhZGluZykpIFxyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBmaWx0ZXJCdW95cyhyZWFkaW5nKSB7XHJcblx0XHRcdGlmICghZmlsdGVycy5idW95c1tyZWFkaW5nLmJ1b3ldKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBmaWx0ZXJUaW1lcyhyZWFkaW5nKSB7XHJcblx0XHRcdGlmIChmaWx0ZXJzLnRpbWVzLnR5cGUgPT0gJ3JhbmdlJykge1xyXG5cdFx0XHRcdHZhciB0aW1lID0gbW9tZW50LnVuaXgocmVhZGluZy50aW1lc3RhbXApO1xyXG5cdFx0XHRcdGlmICghdGltZS5pc0JldHdlZW4oZmlsdGVycy50aW1lcy5yYW5nZS5mcm9tLCBmaWx0ZXJzLnRpbWVzLnJhbmdlLnRvKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChmaWx0ZXJzLnRpbWVzLnR5cGUgPT0gJ3BvaW50Jykge1xyXG5cdFx0XHRcdGlmIChmaWx0ZXJzLnRpbWVzLnBvaW50UmVhZGluZ3MuaGFzT3duUHJvcGVydHkocmVhZGluZy5idW95KSkge1xyXG5cdFx0XHRcdFx0aWYgKGZpbHRlcnMudGltZXMucG9pbnRSZWFkaW5nc1tyZWFkaW5nLmJ1b3ldLmlkICE9IHJlYWRpbmcuaWQpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gZmlsdGVyU2Vuc29yKGlkLCBzZW5zb3IsIHJlYWRpbmcpIHtcclxuXHRcdFx0aWYgKCFzZW5zb3IuZW5hYmxlZCkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciB2YWx1ZSA9IHBhcnNlSW50KHNlbnNvci52YWx1ZSwgMTApO1xyXG5cdFx0XHRpZiAoc2Vuc29yLnNlbGVjdGVkID09IFwiPlwiKSB7XHJcblx0XHRcdFx0aWYgKHJlYWRpbmcucmVhZGluZ3NbaWRdIDw9IHZhbHVlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKHNlbnNvci5zZWxlY3RlZCA9PSBcIjxcIikge1xyXG5cdFx0XHRcdGlmIChyZWFkaW5nLnJlYWRpbmdzW2lkXSA+PSB2YWx1ZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChzZW5zb3Iuc2VsZWN0ZWQgPT0gXCI9XCIpIHtcclxuXHRcdFx0XHRpZiAocmVhZGluZy5yZWFkaW5nc1tpZF0gIT0gdmFsdWUpIHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGdldFJlbGF0aXZlQWdlKHJlYWRpbmcpIHtcclxuXHRcdFx0Ly8gcmV0dXJucyBhZ2UgYmV0d2VlbiAwIGFuZCAxLCBiYXNlZCBvbiBhIHJhbmdlIGRldGVybWluZWQgYXMgc2VlbiBiZWxvd1xyXG5cdFx0XHR2YXIgdGltZSA9IG1vbWVudC51bml4KHJlYWRpbmcudGltZXN0YW1wKTtcclxuXHRcdFx0dmFyIHRpbWVzID0gZmlsdGVycy50aW1lcztcclxuXHRcdFx0XHJcblx0XHRcdGlmICh0aW1lcy50eXBlID09ICdhbGwnKSB7XHJcblx0XHRcdFx0Ly8gcmFuZ2U6IGZyb20gMiB3ZWVrcyBhZ28gdW50aWwgbm93XHJcblx0XHRcdFx0dmFyIG1heCA9IG1vbWVudCgpO1xyXG5cdFx0XHRcdHZhciBtaW4gPSBtYXguY2xvbmUoKS5zdWJ0cmFjdCgyLCAnd2Vla3MnKTtcclxuXHRcdFx0XHRyZXR1cm4gY2FsY3VsYXRlQWdlSW5SYW5nZSh0aW1lLCBtaW4sIG1heCk7XHJcblx0XHRcdFxyXG5cdFx0XHR9IGVsc2UgaWYgKHRpbWVzLnR5cGUgPT0gJ3JhbmdlJykge1xyXG5cdFx0XHRcdC8vIHJhbmdlOiByYW5nZSBvZiB0aW1lIGZpbHRlcnNcclxuXHRcdFx0XHR2YXIgbWF4ID0gdGltZXMucmFuZ2UudG87XHJcblx0XHRcdFx0dmFyIG1pbiA9IHRpbWVzLnJhbmdlLmZyb207XHJcblx0XHRcdFx0cmV0dXJuIGNhbGN1bGF0ZUFnZUluUmFuZ2UodGltZSwgbWluLCBtYXgpO1xyXG5cdFx0XHRcclxuXHRcdFx0fSAgZWxzZSBpZiAodGltZXMudHlwZSA9PSAncG9pbnQnKSB7XHJcblx0XHRcdFx0Ly8gcmFuZ2U6IGZyb20gdHdvIHdlZWtzIGJlZm9yZSBwb2ludCB1bnRpbCBwb2ludFxyXG5cdFx0XHRcdGlmICh0aW1lcy5wb2ludCA9PT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIDEuMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dmFyIG1heCA9IHRpbWVzLnBvaW50O1xyXG5cdFx0XHRcdHZhciBtaW4gPSBtYXguY2xvbmUoKS5zdWJ0cmFjdCgyLCAnd2Vla3MnKTtcclxuXHRcdFx0XHRyZXR1cm4gY2FsY3VsYXRlQWdlSW5SYW5nZSh0aW1lLCBtaW4sIG1heCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gY2FsY3VsYXRlQWdlSW5SYW5nZSh0aW1lLCBtaW4sIG1heCkge1xyXG5cdFx0XHRpZiAodGltZS5pc0JlZm9yZShtaW4pKSB7XHJcblx0XHRcdFx0cmV0dXJuIDA7XHJcblx0XHRcdH0gZWxzZSBpZiAoIXRpbWUuaXNCZWZvcmUobWF4KSkge1xyXG5cdFx0XHRcdHJldHVybiAxLjA7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuICh0aW1lLmRpZmYobWluKSAvIG1heC5kaWZmKG1pbikpO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTsiLCIvKiBnbG9iYWwgbW9tZW50ICovXHJcbi8qIGdsb2JhbCBnb29nbGUgKi9cclxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHRcclxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRhc2hib2FyZCcpXHJcblx0XHQuZmFjdG9yeSgnbWFwJywgbWFwKTtcclxuXHRcdFxyXG5cdGZ1bmN0aW9uIG1hcChkYXNoYm9hcmQpIHtcclxuXHRcdFx0XHRcclxuXHRcdHZhciBtYXA7XHJcblx0XHR2YXIgbWFwT3B0aW9ucyA9IHtcclxuXHRcdFx0em9vbTogMTEsXHJcblx0XHRcdGNlbnRlcjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZygtMjcuNTczNzA0LCAxNTMuMDU1ODE4KSxcclxuXHRcdFx0bWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUFxyXG5cdFx0fTtcclxuXHRcdHZhciBtYXJrZXJzID0ge307XHJcblx0XHR2YXIgZGlzYWJsZWRNYXJrZXJzID0gW107XHJcblx0XHR2YXIgaW5mb0JveDtcclxuXHRcdHZhciBpbmZvQm94T3BlbiA9IGZhbHNlO1xyXG5cdFx0dmFyIGN1cnJlbnRNYXJrZXJJZCA9IC0xO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpbml0aWFsaXNlTWFwOiBpbml0aWFsaXNlTWFwLFxyXG5cdFx0XHR1cGRhdGVSZWFkaW5nczogdXBkYXRlUmVhZGluZ3NcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gaW5pdGlhbGlzZU1hcCgpIHtcclxuXHRcdFx0Ly8gZGlzYWJsZSBwb2ludHMgb2YgaW50ZXJlc3RcclxuXHRcdFx0dmFyIG5vUG9pID0gW1xyXG5cdFx0XHQgICAge1xyXG5cdFx0XHQgICAgICAgIGZlYXR1cmVUeXBlOiBcInBvaVwiLFxyXG5cdFx0XHQgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVsc1wiLFxyXG5cdFx0XHQgICAgICAgIHN0eWxlcnM6IFtcclxuXHRcdFx0ICAgICAgICAgICAgICB7IHZpc2liaWxpdHk6IFwib2ZmXCIgfVxyXG5cdFx0XHQgICAgICAgIF1cclxuXHRcdFx0ICAgIH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHQgICAgICAgIGZlYXR1cmVUeXBlOiBcInRyYW5zaXQuc3RhdGlvblwiLFxyXG5cdFx0XHQgICAgICAgIGVsZW1lbnRUeXBlOiBcImxhYmVsc1wiLFxyXG5cdFx0XHQgICAgICAgIHN0eWxlcnM6IFtcclxuXHRcdFx0ICAgICAgICAgICAgICB7IHZpc2liaWxpdHk6IFwib2ZmXCIgfVxyXG5cdFx0XHQgICAgICAgIF1cclxuXHRcdFx0ICAgIH1cclxuXHRcdFx0XTtcclxuXHRcdFx0bWFwT3B0aW9ucy5zdHlsZXMgPSBub1BvaTtcclxuXHRcdFx0XHJcblx0XHRcdG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtY2FudmFzXCIpLCBtYXBPcHRpb25zKTsgXHJcblx0XHRcdFxyXG5cdFx0XHRcclxuXHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnem9vbV9jaGFuZ2VkJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0bWFwT3B0aW9ucy56b29tID0gbWFwLmdldFpvb20oKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHRnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICdjZW50ZXJfY2hhbmdlZCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdG1hcE9wdGlvbnMuY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ21hcHR5cGVpZF9jaGFuZ2VkJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0bWFwT3B0aW9ucy5tYXBUeXBlSWQgPSBtYXAuZ2V0TWFwVHlwZUlkKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdCAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0ICAgICAgICBpZiAoaW5mb0JveE9wZW4pIHtcclxuXHRcdFx0XHRcdGNsb3NlSW5mb0JveCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdCAgICB9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIG1hcmsgcmVhZGluZ3NcclxuXHRcdFx0dmFyIHJlYWRpbmdzID0gZGFzaGJvYXJkLnJlYWRpbmdzKCk7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVhZGluZ3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRhZGRNYXJrZXIocmVhZGluZ3NbaV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZVJlYWRpbmdzKCkge1xyXG5cdFx0XHR2YXIgcmVhZGluZ3MgPSBkYXNoYm9hcmQucmVhZGluZ3MoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGNyZWF0ZSBhbiBhcnJheSBvZiByZWFkaW5ncyB3aGljaCBzaG91bGQgYmUgZW5hYmxlZFxyXG5cdFx0XHR2YXIgZW5hYmxlZFJlYWRpbmdzID0gW107XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVhZGluZ3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRlbmFibGVkUmVhZGluZ3MucHVzaChyZWFkaW5nc1tpXS5pZCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGRpc2FibGUgbWFya2VycyB3aGljaCBzaG91bGRuJ3QgYmUgZW5hYmxlZFxyXG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gbWFya2Vycykge1xyXG5cdFx0XHRcdGlmIChtYXJrZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuXHRcdFx0XHRcdGtleSA9IHBhcnNlSW50KGtleSwgMTApO1xyXG5cdFx0XHRcdFx0aWYgKGVuYWJsZWRSZWFkaW5ncy5pbmRleE9mKGtleSkgPT0gLTEpIHtcclxuXHRcdFx0XHRcdFx0ZGlzYWJsZU1hcmtlcihrZXkpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gYWRkIGFuZCByZS1lbmFibGUgbWFya2Vyc1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHJlYWRpbmdzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGlkID0gcmVhZGluZ3NbaV0uaWQ7XHJcblx0XHRcdFx0aWYgKCFtYXJrZXJzLmhhc093blByb3BlcnR5KGlkKSkge1xyXG5cdFx0XHRcdFx0YWRkTWFya2VyKHJlYWRpbmdzW2ldKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gdXBkYXRlIG9wYWNpdHlcclxuXHRcdFx0XHRcdG1hcmtlcnNbaWRdLnNldE9wYWNpdHkoY2FsY3VsYXRlT3BhY2l0eShyZWFkaW5nc1tpXSkpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyByZS1lbmFibGUgZGlzYWJsZWQgbWFya2Vyc1xyXG5cdFx0XHRcdFx0aWYgKGRpc2FibGVkTWFya2Vycy5pbmRleE9mKGlkKSAhPSAtMSkge1xyXG5cdFx0XHRcdFx0XHRlbmFibGVNYXJrZXIoaWQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBhZGRNYXJrZXIocmVhZGluZykge1xyXG5cdFx0XHR2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcblx0XHRcdFx0cG9zaXRpb246IG5ldyBnb29nbGUubWFwcy5MYXRMbmcocmVhZGluZy5sYXRpdHVkZSwgcmVhZGluZy5sb25naXR1ZGUpLFxyXG5cdFx0XHRcdG1hcDogbWFwLFxyXG5cdFx0XHRcdC8vIHRpdGxlOiAnQnVveSAnICsgcmVhZGluZy5idW95ICsgJzogcmVhZGluZyAnICsgcmVhZGluZy5pZCxcclxuXHRcdFx0XHRvcGFjaXR5OiBjYWxjdWxhdGVPcGFjaXR5KHJlYWRpbmcpXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRvcGVuSW5mb0JveChyZWFkaW5nLCBtYXJrZXIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdG1hcmtlcnNbcmVhZGluZy5pZF0gPSBtYXJrZXI7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGRpc2FibGVNYXJrZXIoaWQpIHtcclxuXHRcdFx0bWFya2Vyc1tpZF0uc2V0TWFwKG51bGwpO1xyXG5cdFx0XHRkaXNhYmxlZE1hcmtlcnMucHVzaChpZCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBjbG9zZSBpbmZvYm94IG9mIGRpc2FibGVkIG1hcmtlclxyXG5cdFx0XHRpZiAoaW5mb0JveE9wZW4pIHtcclxuXHRcdFx0XHRpZiAoZGlzYWJsZWRNYXJrZXJzLmluZGV4T2YoY3VycmVudE1hcmtlcklkKSAhPSAtMSkge1xyXG5cdFx0XHRcdFx0Y2xvc2VJbmZvQm94KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGVuYWJsZU1hcmtlcihpZCkge1xyXG5cdFx0XHRtYXJrZXJzW2lkXS5zZXRNYXAobWFwKTtcclxuXHRcdFx0ZGlzYWJsZWRNYXJrZXJzLnNwbGljZShkaXNhYmxlZE1hcmtlcnMuaW5kZXhPZihpZCksIDEpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBjYWxjdWxhdGVPcGFjaXR5KHJlYWRpbmcpIHtcclxuXHRcdFx0dmFyIGFnZSA9IGRhc2hib2FyZC5nZXRSZWxhdGl2ZUFnZShyZWFkaW5nKTtcclxuXHRcdFx0dmFyIG1pblZpc2libGVPcGFjaXR5ID0gMC4zO1xyXG5cdFx0XHRyZXR1cm4gYWdlICogKDEgLSBtaW5WaXNpYmxlT3BhY2l0eSkgKyBtaW5WaXNpYmxlT3BhY2l0eTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gY2xvc2VJbmZvQm94KCkge1xyXG5cdFx0XHRpbmZvQm94LmNsb3NlKCk7XHJcblx0XHRcdGluZm9Cb3hPcGVuID0gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIG9wZW5JbmZvQm94KHJlYWRpbmcsIG1hcmtlcikge1xyXG5cdFx0XHRpZiAoaW5mb0JveE9wZW4pIHtcclxuXHRcdFx0XHRjbG9zZUluZm9Cb3goKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAocmVhZGluZy5pZCA9PSBjdXJyZW50TWFya2VySWQpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHZhciBmb3JtYXR0ZWRUaW1lID0gbW9tZW50LnVuaXgocmVhZGluZy50aW1lc3RhbXApXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmZvcm1hdCgnRCBNTU1NIGg6bW0gQScpO1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIGNvbnRlbnQgPSBcIjxkaXY+XCIgK1xyXG5cdFx0XHRcdFx0XHRcdFwiPGg1IHN0eWxlPSdjb2xvcjogd2hpdGUnPkJ1b3kgXCIgKyByZWFkaW5nLmJ1b3kgKyBcIjwvaDU+XCIgK1xyXG5cdFx0XHRcdFx0XHRcdGZvcm1hdHRlZFRpbWUgKyBcclxuXHRcdFx0XHRcdFx0XHRcIjxicj4tLS1cIiArXHJcblx0XHRcdFx0XHRcdFx0XCI8YnI+QmF0dGVyeTogXCIgKyByZWFkaW5nLnJlYWRpbmdzLmJhdHRlcnkgK1xyXG5cdFx0XHRcdFx0XHRcdFwiPGJyPlByZXNzdXJlOiBcIiArIHJlYWRpbmcucmVhZGluZ3MucHJlc3N1cmUgK1xyXG5cdFx0XHRcdFx0XHRcdFwiPGJyPlNlYSBsZXZlbDogXCIgKyByZWFkaW5nLnJlYWRpbmdzLnNlYWxldmVsICtcclxuXHRcdFx0XHRcdFx0XHRcIjxicj5UdXJiaWRpdHk6IFwiICsgcmVhZGluZy5yZWFkaW5ncy50dXJiaWRpdHkgK1xyXG5cdFx0XHRcdFx0XHRcdFwiPC9kaXY+XCI7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdGluZm9Cb3ggPSBuZXcgSW5mb0JveCh7XHJcblx0XHRcdFx0Y29udGVudDogY29udGVudCxcclxuXHRcdFx0XHRwaXhlbE9mZnNldDogbmV3IGdvb2dsZS5tYXBzLlNpemUoLTYwLCAwKSxcclxuXHQgICAgICAgICAgICB6SW5kZXg6IG51bGwsXHJcblx0ICAgICAgICAgICAgYm94U3R5bGU6IHtcclxuXHQgICAgICAgICAgICAgICAgLy8gXCJiYWNrZ3JvdW5kXCI6IFwidXJsKCdodHRwOi8vZ29vZ2xlLW1hcHMtdXRpbGl0eS1saWJyYXJ5LXYzLmdvb2dsZWNvZGUuY29tL3N2bi90cnVuay9pbmZvYm94L2V4YW1wbGVzL3RpcGJveC5naWYnKSBuby1yZXBlYXRcIixcclxuXHRcdFx0XHRcdFwiY29sb3JcIjogXCJ3aGl0ZVwiLFxyXG5cdFx0XHRcdFx0XCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFwicmdiKDQwLCA0MCwgNDApXCIsXHJcblx0XHRcdFx0XHRcIndpZHRoXCI6IFwiMTIwcHhcIixcclxuXHRcdFx0XHRcdFwicGFkZGluZ1wiOiBcIjEwcHhcIixcclxuXHRcdFx0XHRcdFwiYm9yZGVyLXJhZGl1c1wiOiBcIjEwcHhcIlxyXG5cdCAgICAgICAgICAgIH0sXHJcblx0ICAgICAgICAgICAgY2xvc2VCb3hNYXJnaW46IFwiLTZweCAtNnB4IDJweCAycHhcIlxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGluZm9Cb3gub3BlbihtYXAsIG1hcmtlcik7XHRcdFx0XHJcblx0XHRcdGluZm9Cb3hPcGVuID0gdHJ1ZTtcclxuXHRcdFx0Y3VycmVudE1hcmtlcklkID0gcmVhZGluZy5pZDtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHRcclxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdzZXJ2ZXInLCBzZXJ2ZXIpO1xyXG5cdFxyXG5cdGZ1bmN0aW9uIHNlcnZlcigkaHR0cCwgU0VSVkVSX0FERFJFU1MsIGF1dGgpIHtcclxuXHRcdFxyXG5cdFx0dmFyIGR1bW15UmVhZGluZ3MgPSBbXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZDogMSxcclxuXHRcdFx0XHRidW95OiAxLFxyXG5cdFx0XHRcdHRpbWVzdGFtcDogMTQzODkzMzYxNCxcclxuXHRcdFx0XHRsYXRpdHVkZTogLTI3LjQ0NjEzNDIzLFxyXG5cdFx0XHRcdGxvbmdpdHVkZTogMTUzLjA3ODM0NjI1LFxyXG5cdFx0XHRcdHJlYWRpbmdzIDoge1xyXG5cdFx0XHRcdFx0YmF0dGVyeTogOTAsXHJcblx0XHRcdFx0XHRwcmVzc3VyZTogMTQwLFxyXG5cdFx0XHRcdFx0c2VhbGV2ZWw6IDIxLFxyXG5cdFx0XHRcdFx0dHVyYmlkaXR5OiAxNFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwge1xyXG5cdFx0XHRcdGlkOiAyLCBcclxuXHRcdFx0XHRidW95OiAyLFxyXG5cdFx0XHRcdHRpbWVzdGFtcDogMTQzODU4ODExNyxcclxuXHRcdFx0XHRsYXRpdHVkZTogLTI3LjQyNjkzNzcyLFxyXG5cdFx0XHRcdGxvbmdpdHVkZTogMTUzLjIwNjc0ODk2LFxyXG5cdFx0XHRcdHJlYWRpbmdzIDoge1xyXG5cdFx0XHRcdFx0YmF0dGVyeTogNzAsXHJcblx0XHRcdFx0XHRwcmVzc3VyZTogMTIyLFxyXG5cdFx0XHRcdFx0c2VhbGV2ZWw6IDQ0LFxyXG5cdFx0XHRcdFx0dHVyYmlkaXR5OiA0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB7XHJcblx0XHRcdFx0aWQ6IDMsIFxyXG5cdFx0XHRcdGJ1b3k6IDIsXHJcblx0XHRcdFx0dGltZXN0YW1wOiAxNDM4NzYwODc2LFxyXG5cdFx0XHRcdGxhdGl0dWRlOiAtMjcuNDkxNDc1LCBcclxuXHRcdFx0XHRsb25naXR1ZGU6IDE1My4wMDY2NTUsXHJcblx0XHRcdFx0cmVhZGluZ3MgOiB7XHJcblx0XHRcdFx0XHRiYXR0ZXJ5OiA0NSxcclxuXHRcdFx0XHRcdHByZXNzdXJlOiA4NSxcclxuXHRcdFx0XHRcdHNlYWxldmVsOiAxNSxcclxuXHRcdFx0XHRcdHR1cmJpZGl0eTogNDVcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHtcclxuXHRcdFx0XHRpZDogNCwgXHJcblx0XHRcdFx0YnVveTogNCxcclxuXHRcdFx0XHR0aW1lc3RhbXA6IDE0Mzg4NDcyOTEsXHJcblx0XHRcdFx0bGF0aXR1ZGU6IC0yNy40MDAzNTcsIFxyXG5cdFx0XHRcdGxvbmdpdHVkZTogMTUzLjE3Nzk5NSxcclxuXHRcdFx0XHRyZWFkaW5ncyA6IHtcclxuXHRcdFx0XHRcdGJhdHRlcnk6IDc1LFxyXG5cdFx0XHRcdFx0cHJlc3N1cmU6IDk3LFxyXG5cdFx0XHRcdFx0c2VhbGV2ZWw6IDMzLFxyXG5cdFx0XHRcdFx0dHVyYmlkaXR5OiA2NlxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwge1xyXG5cdFx0XHRcdGlkOiA3NywgXHJcblx0XHRcdFx0YnVveTogMSxcclxuXHRcdFx0XHR0aW1lc3RhbXA6IDE0MzgzMjg4MzksXHJcblx0XHRcdFx0bGF0aXR1ZGU6IC0yNy40NDcxMzQyMyxcclxuXHRcdFx0XHRsb25naXR1ZGU6IDE1My4wOTIzNDYyNSxcclxuXHRcdFx0XHRyZWFkaW5ncyA6IHtcclxuXHRcdFx0XHRcdGJhdHRlcnk6IDgzLFxyXG5cdFx0XHRcdFx0cHJlc3N1cmU6IDExOCxcclxuXHRcdFx0XHRcdHNlYWxldmVsOiAyNC41LFxyXG5cdFx0XHRcdFx0dHVyYmlkaXR5OiA4XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRdO1xyXG5cdFx0XHJcblx0XHR2YXIgZHVtbXlTZW5zb3JzID0gW1xyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWQ6IFwiYmF0dGVyeVwiLFxyXG5cdFx0XHRcdG5hbWU6IFwiQmF0dGVyeVwiLFxyXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkJhdHRlcnkgbGV2ZWwgb2YgYnVveVwiLFxyXG5cdFx0XHRcdGNvbG91cjogXCJcIixcclxuXHRcdFx0XHR1bml0czogXCIlXCIsXHJcblx0XHRcdFx0bG93ZXJCb3VuZDogMCxcclxuXHRcdFx0XHR1cHBlckJvdW5kOiAxMDAsXHJcblx0XHRcdFx0ZGlzcGxheTogdHJ1ZSxcclxuXHRcdFx0XHR1bmNvbmZpZ3VyZWQ6IGZhbHNlXHRcdFx0XHRcclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlkOiBcInR1cmJpZGl0eVwiLFxyXG5cdFx0XHRcdG5hbWU6IFwiVHVyYmlkaXR5XCIsXHJcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2F0ZXIgcXVhbGl0eSBhcm91bmQgYnVveVwiLFxyXG5cdFx0XHRcdGNvbG91cjogXCJcIixcclxuXHRcdFx0XHR1bml0czogXCJnL21sXCIsXHJcblx0XHRcdFx0bG93ZXJCb3VuZDogMCxcclxuXHRcdFx0XHR1cHBlckJvdW5kOiA3MCxcclxuXHRcdFx0XHRkaXNwbGF5OiB0cnVlLFxyXG5cdFx0XHRcdHVuY29uZmlndXJlZDogZmFsc2VcdFx0XHRcdFxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWQ6IFwicHJlc3N1cmVcIixcclxuXHRcdFx0XHRuYW1lOiBcIlwiLFxyXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlwiLFxyXG5cdFx0XHRcdGNvbG91cjogXCJcIixcclxuXHRcdFx0XHR1bml0czogXCJcIixcclxuXHRcdFx0XHRsb3dlckJvdW5kOiAtMSxcclxuXHRcdFx0XHR1cHBlckJvdW5kOiAtMSxcclxuXHRcdFx0XHRkaXNwbGF5OiBmYWxzZSxcclxuXHRcdFx0XHR1bmNvbmZpZ3VyZWQ6IHRydWVcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRdO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRnZXRSZWFkaW5nczogZ2V0UmVhZGluZ3MsXHJcblx0XHRcdGdldFNlbnNvcnM6IGdldFNlbnNvcnMsXHJcblx0XHRcdGxvZ2luOiBsb2dpbixcclxuXHRcdFx0bG9nb3V0OiBsb2dvdXRcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGdldFJlYWRpbmdzKCkge1xyXG5cdFx0XHRjb25zb2xlLmxvZygncXVlcnlpbmcgc2VydmVyJyk7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgdG9rZW4gPSBhdXRoLmdldFRva2VuKCk7XHJcblx0XHRcdHZhciBjb25maWcgPSB7XHJcblx0XHRcdFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdFx0J0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoU0VSVkVSX0FERFJFU1MgKyAnL2FwaS9yZWFkaW5ncycsIGNvbmZpZyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGdldFNlbnNvcnMoKSB7XHJcblx0XHRcdHJldHVybiBkdW1teVNlbnNvcnM7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xyXG5cdFx0XHR2YXIgZGF0YSA9IHtcclxuXHRcdFx0XHR1c2VybmFtZTogdXNlcm5hbWUsXHJcblx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkXHJcblx0XHRcdH07XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KFNFUlZFUl9BRERSRVNTICsgJy9hcGkvbG9naW4nLCBkYXRhKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZnVuY3Rpb24gbG9nb3V0KCkge1xyXG5cdFx0XHRhdXRoLmxvZ291dCgpO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=