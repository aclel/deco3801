<h3>Users</h3>
<table>
    <thead>
        <tr>
            <th>Email</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Role</th>
            <th>Last Login</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="user in vm.users">
            <td>
                <span ng-if="user.id != -2">{{ user.email }}</span>
                <input ng-if="user.id == -2" type="text" ng-model="vm.editUser.email" placeholder="johndoe@aol.com">
            </td>
            <td>
                <span ng-if="vm.editUserId != user.id">{{ user.firstName }}</span>
                <input ng-if="vm.editUserId == user.id" type="text" ng-model="vm.editUser.firstName" placeholder="John">
            </td>
            <td>
                <span ng-if="vm.editUserId != user.id">{{ user.lastName }}</span>
                <input ng-if="vm.editUserId == user.id" type="text" ng-model="vm.editUser.lastName" placeholder="Doe">
            </td>
            <td>
                <span ng-if="vm.editUserId != user.id">{{ user.role }}</span>
                <select ng-if="vm.editUserId == user.id"
                    type="button" class="btn btn-default" 
                    ng-model="vm.editUser.role" 
                    bs-options="opt for opt in vm.roles"
                    bs-select>
                </select>
            </td>
            <td>
                {{ user.lastLogin.text }}
            </td>
            <td>
                <button class="small button" ng-if="vm.editUserId == -1" ng-click="vm.startEditingUser(user)">Edit</button>
                <button class="small button" ng-if="vm.editUserId == user.id" ng-click="vm.finishEditingUser()">Save</button>
                <button class="small info button" ng-if="vm.editUserId == user.id" ng-click="vm.cancelEditingUser()">Cancel</button>
                <button class="small alert button" ng-if="vm.showDeleteButton(user)" ng-click="vm.deleteUser(user)">Delete</button>
            </td>
        </tr>
    </tbody>
</table>
<button class="small button" ng-if="vm.editUserId == -1" ng-click="vm.startAddingUser()">Add User</button>
